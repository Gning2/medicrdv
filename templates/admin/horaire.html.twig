{% extends 'base.html.twig' %}

{% block title %}Horaire du médecin
	{{app.user.nom}}
{% endblock %}

{% block body %}

	<body>
		<!-- SIDEBAR -->
		<section id="sidebar">
			<a href="#" class="brand"></a>
			<ul class="side-menu top">
				<li>
					<a href="{{path('app_neurologie')}}">
						<i class='bx bxs-calendar-check'></i>
						<span class="text">Mes rendez-vous</span>
					</a>
				</li>
				<li class="active">
					<a href="{{path('app_horaire')}}">
						<i class='bx bxs-time'></i>
						<span class="text">Horaire</span>
					</a>
				</li>
				<ul id="side-menuid" class="side-menu">
					<li>
						<a href="{{path('app_logout')}}" class="logout">
							<i class='bx bxs-log-out-circle'></i>
							<span class="text">Déconnexion</span>
						</a>
					</li>
				</ul>
			</section>
			<!-- SIDEBAR -->

			<!-- CONTENT -->
			<section
				id="content">
				<!-- NAVBAR -->
				<nav>
					<i class='bx bx-menu'></i>
					<form action="#">
						<div class="form-input">
							<input type="search" placeholder="Search...">
							<button type="submit" class="search-btn">
								<i class='bx bx-search'></i>
							</button>
						</div>
					</form>

					<i class='bx bx-sun'></i><input type="checkbox" id="switch-mode" hidden>
					<label for="switch-mode" class="switch-mode"></label>
					<i class='bx bx-moon'></i>

					<a href="#" class="profile">
						<img src="{{asset('images/people.png')}}">
					</a>
				</nav>
				<!-- NAVBAR -->

				<!-- MAIN -->
				<main>
					<div class="head-title">
						<div class="left">
							<h1>Horaire</h1>
						</div>
						<div class="right">
							<a href="{{path('app_horaire_new')}}" class="btn btn-outline-success">
								<i class='bx bx-plus-circle'></i>Nouvelle plage horaire</a>
						</div>
					</div>
					<div class="table-data">
						<div class="order">
							<div class="head">
								<h3>Horaire</h3>
							</div>
							<table>
								<thead>
									<tr>
										<th>JOUR</th>
										<th>Heure DEBUT</th>
										<th>HEURE FIN</th>
										<th>ACTION</th>
									</tr>
								</thead>
								<tbody>
									{% for userHoraire in userHoraires %}
										<tr>
											<td>
												{{userHoraire.jour}}
											</td>
											<td>
												{{userHoraire.hd}}
											</td>
											<td>
												{{userHoraire.hf}}
											</td>
											<td>
												<a href={{ path('app_horaireedit', {'id':userHoraire.id} ) }} class="btn btn-success submit_btn w-80 " type="submit">
													Modifier
												</a>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>


					</main>
					<!-- MAIN -->
				</body>
			</section>


			<script>
				const allSideMenu = document.querySelectorAll('#sidebar .side-menu.top li a');
allSideMenu.forEach(item => {
const li = item.parentElement;
item.addEventListener('click', function () {
allSideMenu.forEach(i => {
i.parentElement.classList.remove('active');
})
li.classList.add('active');
})
});

// TOGGLE SIDEBAR
const menuBar = document.querySelector('#content nav .bx.bx-menu');
const sidebar = document.getElementById('sidebar');
menuBar.addEventListener('click', function () {
sidebar.classList.toggle('hide');
})

const searchButton = document.querySelector('#content nav form .form-input button');
const searchButtonIcon = document.querySelector('#content nav form .form-input button .bx');
const searchForm = document.querySelector('#content nav form');

searchButton.addEventListener('click', function (e) {
if (window.innerWidth < 576) {
e.preventDefault();
searchForm.classList.toggle('show');
if (searchForm.classList.contains('show')) {
searchButtonIcon.classList.replace('bx-search', 'bx-x');
} else {
searchButtonIcon.classList.replace('bx-x', 'bx-search');
}
}
})

if (window.innerWidth < 768) {
sidebar.classList.add('hide');
} else if (window.innerWidth > 576) {
searchButtonIcon.classList.replace('bx-x', 'bx-search');
searchForm.classList.remove('show');
}


window.addEventListener('resize', function () {
if (this.innerWidth > 576) {
searchButtonIcon.classList.replace('bx-x', 'bx-search');
searchForm.classList.remove('show');
}
})


const switchMode = document.getElementById('switch-mode');

switchMode.addEventListener('change', function () {
if (this.checked) {
document.body.classList.add('dark');
} else {
document.body.classList.remove('dark');
}
})

function myFunction(idButton) {
var el = document.getElementById('myBtn' + idButton);
console.log("bouton clicker")
$.get('/medecin/' + idButton, (data) => {
console.log(data)
$('#moreInfo').html("<li><b>Numero Référence:</b>  " + data.numRef + "</li>" + "<li><b>Prenom:</b>  " + data.prenom + "</li>" + "<li><b>Nom:</b>  " + data.nom + "</li>" + "<li><b>Email:</b>  " + data.email + "</li>" + "<li><b>Téléphone:</b>  " + data.numTel + "</li>" + "<li><b>Adresse:</b>  " + data.adresse + "</li>" + "<li><b>Service:</b>  " + data.service + "</li>" + "<li><b>Age:</b>  " + data.age + "</li>" + "<li><b>Date:</b>  " + data.dateRdv + "</li>" + "<li><b>Heure:</b>  " + data.heureRes + "</li>" + "<li><b>Status:</b>  " + data.status + "</li>")
}, "json")
}
			</script>
		</body>
	{% endblock %}
