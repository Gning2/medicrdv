{% extends 'base.html.twig' %}

{% block title %}Création nouveau rendez-vous {% endblock %}
{% block stylesheets%}
<style>
   .form-control,.form-select, .dataTable-input 
        {
            margin : 10px;
            width:100%;
            padding: 10px;
            font-size: 0.875rem;
            font-weight: 400;
            line-height: 1;
            color: #69707a;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid #c5ccd6;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border-radius: 0.35rem;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        #formulaire
        {
            height: 400px;
        }
        .row
        {
            margin : 15px;
            justify-content: space-between;
        }
        .mb-2
        {
            display: flex;
            flex-direction : row;
            width: 100%;
        }
        .mb2 i 
        {
            position : absolute;
        }
        .icon {
            padding: 10px;
            min-width: 40px;
            margin-left: -45px;
            margin-top: 10px;
            color : #1fab89;
        }
        .textP
        {
            margin-top:30px;
            margin-left: 50px;
        }
        .edit
        {  
            width: 100%;
            justify-content:center;
        }
        .alert
        {
            
            font-size: 14px;
        }
        .btn.btn-outline-success
        {
            margin-left:24%;
            width : 50%;
        }
        .form-control:focus{
            box-shadow: none;
            border-color: #1fab89;
        }
        .head{
           justify-content: space-between;
        }

        .areamotif{
          height:80px;
        }
</style>
{% endblock %}
{% block body %}

<body>
<!-- SIDEBAR -->
<section id="sidebar">
   <a href="#" class="brand">
   </a>
   <ul class="side-menu top">
      <li class="active">
         <a href="{{path('app_neurologie')}}">
            <i class='bx bxs-calendar-check' ></i>
            <span class="text">Mes rendez-vous</span>
         </a>
      </li>
      <li>
         <a href="{{path('app_horaire')}}">
            <i class='bx bxs-time' ></i>
            <span class="text">Horaire</span>
         </a>
      </li>
   </ul>
   <ul id="side-menuid" class="side-menu">
      <li>
         <a href="{{path('app_logout')}}" class="logout">
            <i class='bx bxs-log-out-circle' ></i>
            <span class="text">Déconnexion</span>
         </a>
      </li>
   </ul>
</section>
<!-- SIDEBAR -->

<!-- CONTENT -->
<section id="content">
   <!-- NAVBAR -->
   <nav>
      <i class='bx bx-menu' ></i>
      <form action="#">
         <div class="form-input">
            <input type="search" placeholder="Search...">
            <button type="submit" class="search-btn"><i class='bx bx-search' ></i></button>
         </div>
      </form>

       <i class='bx bx-sun'></i><input type="checkbox" id="switch-mode" hidden>
      <label for="switch-mode" class="switch-mode"></label> <i class='bx bx-moon' ></i>
      
      <a href="#" class="profile">
         <img src="{{asset('images/people.png')}}">
      </a>
   </nav>
   <!-- NAVBAR -->

   <!-- MAIN -->
   <main>
      <div class="table-data">
         <div class="order">
            <div class="head">
               <div class="left">
                  <h3>Nouveau rendez-vous</h3>
               </div>
               <div class="right">
                 <a href="{{path('app_neurologie')}}" class="btn btn-outline-danger" >Retour</a>
               </div>
            </div>
            {{form_start(form, {'attr': {'class': 'inline'}}) }}
                    {% block flash_messages %}
                        {% for message in app.flashes('notice') %}
                            <div class="alert alert-success">
                                {{message}}
                            </div>
                        {% endfor %}
                    {% endblock %}
                    <div class="mb-2 ">
                        {{form_widget(form.nom_patient, {'attr': {'placeholder': 'Nom Patient'}}) }}
                        <i class="fal fa-user icon"></i> 
                        {{form_widget(form.prenom_patient, {'attr': {'placeholder': 'Prenom Patient'}}) }}
                        <i class="fal fa-user icon"></i> 
                    </div>
                    <div class="mb-2 ">
                        {{form_widget(form.email_patient, {'attr': {'placeholder': 'Adresse Mail'}}) }}
                        <i class="fal fa-at icon"></i>
                        {{form_widget(form.num_tel, {'attr': {'placeholder': '+221 77 000 00 00'}}) }}
                        <i class="fal fa-mobile icon"></i>
                    </div>
                    <div class="mb-2 ">
                        {{form_widget(form.adresse, {'attr': {'placeholder': 'Adresse'}}) }}
                        <i class="fal fa-map-marked icon"></i> 
                        {{form_widget(form.service, {'attr': {'placeholder': 'Service'}}) }}
                        <i class="fal fa-hospital-user icon"></i>
                    </div>
                    <div class="mb-2 ">
                        {{form_widget(form.date_rdv, {'attr': {'placeholder': 'Date (jj/mm/aaaa)'}}) }}
                        <i class="fal fa-calendar-alt icon"></i>
                        {{form_widget(form.heure_res, {'attr': {'placeholder': 'Heure (h:mn)'}}) }}
                        <i class="fal fa-clock icon"></i>
                    </div>
                    <div class="mb-2 ">
                     {{form_widget(form.motif, {'attr': {'placeholder': 'Motif ( Entre 0 ~ 200 caractères )'}}) }}
                     <i class="fa-solid fa-pen-to-square"></i>
                 </div>
                    <div class="mb-2 ">
                     {{form_widget(form.sexe, {'attr': {'placeholder': 'Sexe'}}) }}
                     <i class="fal fa-venus-mars icon"></i>
                     {{form_widget(form.age, {'attr': {'placeholder': 'Age'}}) }}
                     <i class="fal fa-user icon"></i>
                 </div>
                    <div class="edit">
                        {{form_widget(form.save, {'attr': {'class': 'btn btn-outline-success'}})}}
                    </div>
                {{form_end(form)}}
         </div>
   </main>
   <!-- MAIN -->
</section>
<!-- CONTENT -->

<script>
   const allSideMenu = document.querySelectorAll('#sidebar .side-menu.top li a');
   allSideMenu.forEach(item=> {
      const li = item.parentElement;
      item.addEventListener('click', function () {
         allSideMenu.forEach(i=> {
            i.parentElement.classList.remove('active');
         })
         li.classList.add('active');
      })
   });

   // TOGGLE SIDEBAR
   const menuBar = document.querySelector('#content nav .bx.bx-menu');
   const sidebar = document.getElementById('sidebar');
   menuBar.addEventListener('click', function () {
      sidebar.classList.toggle('hide');
   })

   const searchButton = document.querySelector('#content nav form .form-input button');
   const searchButtonIcon = document.querySelector('#content nav form .form-input button .bx');
   const searchForm = document.querySelector('#content nav form');
   
   searchButton.addEventListener('click', function (e) {
      if(window.innerWidth < 576) {
         e.preventDefault();
         searchForm.classList.toggle('show');
         if(searchForm.classList.contains('show')) {
            searchButtonIcon.classList.replace('bx-search', 'bx-x');
         } else {
            searchButtonIcon.classList.replace('bx-x', 'bx-search');
         }
      }
   })

   if(window.innerWidth < 768) {
      sidebar.classList.add('hide');
   } else if(window.innerWidth > 576) {
      searchButtonIcon.classList.replace('bx-x', 'bx-search');
      searchForm.classList.remove('show');
   }
   
   
   window.addEventListener('resize', function () {
      if(this.innerWidth > 576) {
         searchButtonIcon.classList.replace('bx-x', 'bx-search');
         searchForm.classList.remove('show');
      }
   })
   
   
   
   const switchMode = document.getElementById('switch-mode');
   
   switchMode.addEventListener('change', function () {
      if(this.checked) {
         document.body.classList.add('dark');
      } else {
         document.body.classList.remove('dark');
      }
   })
      
   function myFunction(idButton){
      var el = document.getElementById('myBtn'+idButton);
      console.log("bouton clicker")
      $.get('/medecin/'+idButton, (data) => {
         console.log(data)
         $('#moreInfo')
         .html("<li><b>ID:</b>  " +data.id+ "</li>" + "<li><b>Prenom:</b>  " +data.prenom+ "</li>" + "<li><b>Nom:</b>  " +data.nom+ "</li>" + "<li><b>Mot de passe:</b>  " +data.motDePasse+ "</li>")
      },"json" )
   }
</script>
</body>
{% endblock %}